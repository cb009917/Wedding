import{r,a as T,b as I,j as t,S as R}from"./index-BgticnMs.js";import{a as K}from"./vendor-Bzgz95E1.js";var M=K();function O({photos:n,currentIndex:o,onClose:h,onNavigate:i,showCaptions:y=!0}){const[m,k]=r.useState(!1),[u,d]=r.useState(null),s=r.useRef(null),f=r.useRef(null);r.useEffect(()=>(f.current=document.activeElement,T("lightbox"),s.current&&s.current.focus(),()=>{I("lightbox"),f.current&&f.current.focus()}),[]),r.useEffect(()=>{const a=e=>{if(s.current){if(e.key==="Tab"){const c=s.current.querySelectorAll('button:not([disabled]), [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(c.length===0){e.preventDefault(),s.current.focus(),e.stopPropagation();return}const g=c[0],x=c[c.length-1];if(e.shiftKey&&document.activeElement===g){e.preventDefault(),x.focus(),e.stopPropagation();return}else if(!e.shiftKey&&document.activeElement===x){e.preventDefault(),g.focus(),e.stopPropagation();return}}switch(e.key){case"Escape":h(),e.stopPropagation();break;case"ArrowLeft":e.preventDefault(),p(),e.stopPropagation();break;case"ArrowRight":e.preventDefault(),v(),e.stopPropagation();break;case"Home":e.preventDefault(),i(0),e.stopPropagation();break;case"End":e.preventDefault(),i(n.length-1),e.stopPropagation();break}}};return s.current&&s.current.addEventListener("keydown",a),()=>{s.current&&s.current.removeEventListener("keydown",a)}},[o,n.length,h,i]),r.useEffect(()=>{k(!1);const a=g=>{if(g>=0&&g<n.length){const x=new Image;x.src=n[g].src}},e=(o+1)%n.length,c=(o-1+n.length)%n.length;a(e),a(c)},[o,n]);const p=()=>{const a=(o-1+n.length)%n.length;i(a)},v=()=>{const a=(o+1)%n.length;i(a)},l=()=>{k(!0)},b=a=>{d({x:a.clientX,y:a.clientY,time:Date.now()})},j=a=>{if(!u)return;const e=a.clientX-u.x,c=a.clientY-u.y,g=Date.now()-u.time,x=Math.abs(e)>Math.abs(c),S=50,C=Math.abs(e)/g;x&&Math.abs(e)>S&&C>.3&&(e>0?p():v()),d(null)},E=()=>{d(null)},w=()=>{d(null)},D=a=>{a.target===a.currentTarget&&h()},P=n[o],L=n.length===1,N=t.jsx("div",{className:"lightbox-backdrop",onClick:D,children:t.jsxs("div",{className:"lightbox-container",ref:s,role:"dialog","aria-modal":"true","aria-label":"Photo gallery lightbox",tabIndex:-1,children:[t.jsx("button",{className:"lightbox-close",onClick:h,"aria-label":"Close gallery",children:"✕"}),t.jsxs("div",{className:"lightbox-image-container",children:[!m&&t.jsx("div",{className:"lightbox-loading",children:t.jsx("div",{className:"map-spinner","aria-label":"Loading image..."})}),t.jsx("img",{src:P.src,alt:P.alt,className:"lightbox-image",onLoad:l,onPointerDown:b,onPointerUp:j,onPointerCancel:E,onPointerLeave:w,style:{opacity:m?1:0}})]}),y&&P.caption&&t.jsx("div",{className:"lightbox-caption",children:P.caption}),!L&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"lightbox-nav-button lightbox-nav-prev",onClick:p,"aria-label":"Previous photo",children:"←"}),t.jsx("button",{className:"lightbox-nav-button lightbox-nav-next",onClick:v,"aria-label":"Next photo",children:"→"})]}),t.jsxs("div",{className:"lightbox-counter",children:[o+1," of ",n.length]}),t.jsx("div",{className:"lightbox-hint",children:"Use arrow keys to navigate, ESC to close"})]})});return M.createPortal(N,document.body)}function U({photos:n=[],columns:o={mobile:1,tablet:2,desktop:3,large:4},gap:h="xl",showCaptions:i=!1}){const[y,m]=r.useState(null),[k,u]=r.useState(!1),d=l=>{m(l),u(!0)},s=()=>{m(null),u(!1)},f=l=>{m(l)},p=(l,b)=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),d(b))},v={"--gallery-columns-mobile":o.mobile,"--gallery-columns-tablet":o.tablet,"--gallery-columns-desktop":o.desktop,"--gallery-columns-large":o.large,"--gallery-gap":`var(--spacing-${h})`};return t.jsxs(R,{id:"photos",background:"white",padding:"large",children:[t.jsxs("div",{className:"gallery-header",children:[t.jsx("h2",{children:"Our Special Moments"}),t.jsx("p",{className:"gallery-subtitle",children:"Captured memories from our special day"})]}),t.jsx("div",{className:"gallery-grid",role:"list",style:v,children:n.map((l,b)=>t.jsxs("button",{className:"gallery-item",role:"button",onClick:()=>d(b),onKeyDown:j=>p(j,b),tabIndex:0,"aria-label":`View photo: ${l.alt}`,children:[t.jsx("img",{src:l.thumbnail||l.src,alt:l.alt,loading:"lazy",className:"gallery-image"}),i&&l.caption&&t.jsx("div",{className:"gallery-caption",children:l.caption})]},l.id))}),k&&y!==null&&t.jsx(O,{photos:n,currentIndex:y,onClose:s,onNavigate:f,showCaptions:i})]})}export{U as default};
